---
phase: 01-apk-parity-release-hardening
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - "zero-auth-wallet/app/my-qr.tsx"
  - "zero-auth-wallet/lib/qr-display.ts"
  - "zero-auth-wallet/package.json"
autonomous: true

must_haves:
  truths:
    - "User can display QR code from wallet"
    - "QR code contains DID and public key"
    - "QR code is scannable by verifiers"
  artifacts:
    - path: "zero-auth-wallet/app/my-qr.tsx"
      provides: "QR display screen"
    - path: "zero-auth-wallet/lib/qr-display.ts"
      provides: "QR code generation utilities"
  key_links:
    - from: "my-qr.tsx"
      to: "wallet.ts"
      via: "getWalletIdentity() call"
---
<objective>
Implement actual QR code generation for proof presentation (WAL-04).

Purpose: Users need to display QR codes that verifiers can scan to initiate verification requests
Output: Working QR display screen with scannable DID QR
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@zero-auth-wallet/app/my-qr.tsx
@zero-auth-wallet/lib/wallet.ts
@zero-auth-wallet/app/(tabs)/credentials.tsx

# QR library docs needed
</context>

<tasks>

<task type="auto">
  <name>Add QR code generation library</name>
  <files>zero-auth-wallet/package.json</files>
  <action>
    Add react-native-qrcode-svg for QR code generation:
    ```bash
    cd zero-auth-wallet && npm install react-native-qrcode-svg
    ```
    
    This library works with React Native and produces vector QR codes.
  </action>
  <verify>
    Package appears in package.json dependencies
  </verify>
  <done>
    QR code library installed
  </done>
</task>

<task name="Task 2: Create QR display utilities" type="auto">
  <files>zero-auth-wallet/lib/qr-display.ts</files>
  <action>
    Create utility module for QR code data preparation:
    
    ```typescript
    // zero-auth-wallet/lib/qr-display.ts
    import { getWalletIdentity } from './wallet';
    
    /**
     * Generates QR payload for proof presentation.
     * Returns DID and public key in a format verifiers can scan.
     */
    export async function getQrPayload(): Promise<string> {
      const identity = await getWalletIdentity();
      if (!identity) {
        throw new Error('Wallet not initialized');
      }
      
      // Return JSON payload with DID for verifier to use
      return JSON.stringify({
        did: identity.did,
        type: 'ZeroAuthIdentity'
      });
    }
    ```
  </action>
  <verify>
    File created with getQrPayload function
  </verify>
  <done>
    QR display utilities created
  </done>
</task>

<task type="auto">
  <name>Update My QR screen with actual QR code</name>
  <files>zero-auth-wallet/app/my-qr.tsx</files>
  <action>
    Replace placeholder QR with actual QR code using react-native-qrcode-svg:
    
    1. Import QRCode from react-native-qrcode-svg
    2. Import getQrPayload from @/lib/qr-display
    3. Import getWalletIdentity to get DID for display
    4. Replace <QrCode size={200} /> placeholder with actual QRCode component
    
    The QR should contain the user's DID for verifier scanning.
  </action>
  <verify>
    QRCode component renders with actual data, no placeholder icon
  </verify>
  <done>
    My QR screen displays scannable QR code with user's DID
  </done>
</task>

</tasks>

<verification>
1. npm install completes without errors
2. QR code displays on My QR screen
3. QR code is scannable and contains DID
</verification>

<success_criteria>
- [ ] react-native-qrcode-svg installed
- [ ] QR displays actual DID data
- [ ] QR is scannable by verifier apps
</success_criteria>

<output>
After completion, create `.planning/phases/01-apk-parity-release-hardening/01-02-SUMMARY.md`
</output>
